# Controller
3 main parts:
• The Occupancy monitoring and access control serve as the backbone for monitoring customer presence within the gym, enabling real-time occupancy updates recovered from the Thingspeak adaptor and device connectors, and analyzing historical data retrieved from the Thingspeak platform for insights to optimize gym operations and client experiences. In particular, the microservice exploits algorithms to make predictions about the occupancy of the gym at different time intervals of the week. Integration of MQTT and REST facilitates efficient data handling: it works as an MQTT subscriber to receive information on user’s accesses and exits, whereas it implements REST APIs to send and receive information to/from the Thingspeak adaptor and to/from the Gym Catalog.
• The Machine availability block tracks the availability of specific gym machine types, showing which ones are being used or not. It works as an MQTT subscriber to receive info about the availability of each machine type and utilizes RESTful APIs to send information to the Thingspeak adaptor and to send/receive data to/from the Gym Catalog.
• The Temperature optimization and energy efficiency block gathers information from humidity and temperature sensors positioned all over the structure. To optimize HVAC (heating, ventilation, and air conditioning) usage and reduce energy waste during off-peak hours, it takes into consideration temperature variations concerning occupancy levels. In particular, it works both as an MQTT subscriber, to receive information on the gym’s environment and as an MQTT publisher to send actuation commands to IoT devices. Furthermore, it employs REST to send information to the Thingspeak adaptor and to send/receive data to/from the Gym Catalog.